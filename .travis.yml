language: python
os: linux

python: "3.8"

jobs:
  include:
  - python: "3.6"
  - python: "3.7"
  - python: "3.8"
  - env: TOXENV=cover
  - env: TOXENV=docs
  - env: TOXENV=pre-commit
  - env: TOXENV=benchmark
  allow_failures:
  - env: TOXENV=benchmark
  fast_finish: true

install: pip install tox tox-travis coveralls
script: tox
after_success: |
  if [ "${TOXENV}" == "benchmark" ]; then
    echo $(ls .benchmarks/*/0001_benchmark.json) $(cat .benchmarks/*/0001_benchmark.json | nc termbin.com 9999)
  fi
